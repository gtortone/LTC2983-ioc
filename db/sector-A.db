#
# CHANNEL 2: thermistor 10K@25C
#
record(ai,"$(SNAME):CH2:value") {
  field(DTYP,"ADC channel")
  field(SCAN,"5 second")
  field(INP,"@2")
  field(FLNK,"$(SNAME):TEMP01")
  field(MDEL,-1)
}

record(calc,"$(SNAME):TEMP01") {
  field(INPA,"$(SNAME):CH2:value")
  field(CALC,"A / 1024")
  field(EGU,"degC")
  field(HOPR,150)
  field(LOPR,-55)
  field(HIGH,45)
  field(LOW,15)
  field(HIHI,115)
  field(LOLO,-35)
  field(FLNK,"$(SNAME):GAMMA01")
  field(MDEL,-1)
}

#
# CHANNEL 4: thermistor 10K@25C
#
record(ai,"$(SNAME):CH4:value") {
  field(DTYP,"ADC channel")
  field(SCAN,"5 second")
  field(INP,"@4")
  field(FLNK,"$(SNAME):TEMP02")
  field(MDEL,-1)
}

record(calc,"$(SNAME):TEMP02") {
  field(INPA,"$(SNAME):CH4:value")
  field(CALC,"A / 1024")
  field(EGU,"degC")
  field(HOPR,150)
  field(LOPR,-55)
  field(HIGH,45)
  field(LOW,15)
  field(HIHI,115)
  field(LOLO,-35)
  field(MDEL,-1)
}

#
# CHANNEL 6: thermistor 10K@25C
#
record(ai,"$(SNAME):CH6:value") {
  field(DTYP,"ADC channel")
  field(SCAN,"5 second")
  field(INP,"@6")
  field(FLNK,"$(SNAME):TEMP03")
  field(MDEL,-1)
}

record(calc,"$(SNAME):TEMP03") {
  field(INPA,"$(SNAME):CH6:value")
  field(CALC,"A / 1024")
  field(EGU,"degC")
  field(HOPR,150)
  field(LOPR,-55)
  field(HIGH,45)
  field(LOW,15)
  field(HIHI,115)
  field(LOLO,-35)
  field(MDEL,-1)
}

#
# CHANNEL 7: direct ADC
#
record(ai,"$(SNAME):CH7:value") {
  field(DTYP,"ADC channel")
  field(SCAN,"5 second")
  field(INP,"@7")
  field(FLNK,"$(SNAME):CH7:VOLT")
  field(MDEL,-1)
}

record(calc,"$(SNAME):CH7:VOLT") {
  field(INPA,"$(SNAME):CH7:value")
  field(CALC,"A / 2^21")
  field(EGU,"V")
  field(HOPR,1)
  field(LOPR,0)
  field(FLNK,"$(SNAME):RH")
  field(MDEL,-1)
}

record(calc,"$(SNAME):RH") {
  field(INPA,"$(SNAME):CH7:VOLT")
  field(CALC,"A * 100")
  field(EGU,"%")
  field(HOPR,100)
  field(LOPR,0)
  field(FLNK,"$(SNAME):RH:FANOUT")
  field(MDEL,-1)
}


#
# Dew point calculation depends on RH variation,
# this record fans the RH out to GAMMA records for a sector 
#
record(fanout,"$(SNAME):RH:FANOUT") {
  field(LNK1,"$(SNAME):GAMMA01")
  field(LNK2,"$(SNAME):GAMMA02")
  field(LNK3,"$(SNAME):GAMMA03")
  field(SELM,"All")
}

#
# Dew point calculation is split in $(SNAME):GAMMA and $(SNAME):DEW
# $(SNAME):TEMP01 
#
record(calc,"$(SNAME):GAMMA01") {
  field(INPA,"$(SNAME):TEMP01")
  field(INPB,"$(SNAME):RH")
  field(CALC,"LOGE(B/100) +(18.678 - A/234.5)*(A / (257.14+A)) ")
  field(FLNK,"$(SNAME):DEW01")
  field(MDEL,-1)
}

record(calc,"$(SNAME):DEW01") {
  field(INPA,"$(SNAME):GAMMA01")
  field(CALC,"257.14 * A /( 18.678 - A) ")
  field(EGU,"degC")
  field(HOPR,150)
  field(LOPR,-55)
  field(HIGH,45)
  field(LOW,15)
  field(HIHI,115)
  field(LOLO,-35)
  field(MDEL,-1)
}

#
# Dew point calculation is split in $(SNAME):GAMMA and $(SNAME):DEW
# $(SNAME):TEMP02 
#
record(calc,"$(SNAME):GAMMA02") {
  field(INPA,"$(SNAME):TEMP02")
  field(INPB,"$(SNAME):RH")
  field(CALC,"LOGE(B/100) +(18.678 - A/234.5)*(A / (257.14+A)) ")
  field(FLNK,"$(SNAME):DEW02")
  field(MDEL,-1)
}

record(calc,"$(SNAME):DEW02") {
  field(INPA,"$(SNAME):GAMMA02")
  field(CALC,"257.14 * A /( 18.678 - A) ")
  field(EGU,"degC")
  field(HOPR,150)
  field(LOPR,-55)
  field(HIGH,45)
  field(LOW,15)
  field(HIHI,115)
  field(LOLO,-35)
  field(MDEL,-1)
}


#
# Dew point calculation is split in $(SNAME):GAMMA and $(SNAME):DEW
# $(SNAME):TEMP03 
#
record(calc,"$(SNAME):GAMMA03") {
  field(INPA,"$(SNAME):TEMP03")
  field(INPB,"$(SNAME):RH")
  field(CALC,"LOGE(B/100) +(18.678 - A/234.5)*(A / (257.14+A)) ")
  field(FLNK,"$(SNAME):DEW03")
  field(MDEL,-1)
}
record(calc,"$(SNAME):DEW03") {
  field(INPA,"$(SNAME):GAMMA03")
  field(CALC,"257.14 * A /( 18.678 - A) ")
  field(EGU,"degC")
  field(HOPR,150)
  field(LOPR,-55)
  field(HIGH,45)
  field(LOW,15)
  field(HIHI,115)
  field(LOLO,-35)
  field(MDEL,-1)
}


#
# CHANNEL 8: diode
#
record(ai,"$(SNAME):CH8:value") {
  field(DTYP,"ADC channel")
  field(SCAN,"5 second")
  field(INP,"@8")
  field(FLNK,"$(SNAME):DIODE")
  field(MDEL,-1)
}

record(calc,"$(SNAME):DIODE") {
  field(INPA,"$(SNAME):CH8:value")
  field(CALC,"A / 1024")
  field(EGU,"degC")
  field(HOPR,150)
  field(LOPR,-55)
  field(HIGH,45)
  field(LOW,15)
  field(HIHI,115)
  field(LOLO,-35)
  field(MDEL,-1)
}
